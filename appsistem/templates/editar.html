{% extends 'index.html' %}
{% block title %}Editar Proyecto | SRP{% endblock %}
{% block breadcrumb %}
  <a href="/misproyectos/" class="text-gray-500 hover:text-ucs-red transition-colors">Mis Proyectos</a>
  <i class="fas fa-chevron-right text-gray-400 text-xs"></i>
  <span class="text-ucs-red font-medium">Editar</span>
{% endblock %}

{% block content %}
<!-- Welcome Section -->
<div class="mb-8">
    <div class="bg-gradient-to-r from-ucs-red to-red-700 rounded-2xl p-6 sm:p-8 text-white relative overflow-hidden">
        <div class="relative z-10">
            <h2 class="text-2xl sm:text-3xl font-bold mb-2">Editar Proyecto</h2>
            <p class="text-red-100 mb-4">Actualiza los datos base del proyecto. Las versiones de documentos se gestionan en el detalle por Momento.</p>
        </div>
        <!-- Decorative elements -->
        <div class="absolute top-0 right-0 -mt-4 -mr-4 w-16 sm:w-24 h-16 sm:h-24 bg-white bg-opacity-10 rounded-full"></div>
        <div class="absolute bottom-0 right-4 sm:right-8 -mb-4 sm:-mb-8 w-20 sm:w-32 h-20 sm:h-32 bg-white bg-opacity-5 rounded-full"></div>
    </div>
</div>

<!-- Main Form -->
<div class="bg-white rounded-xl shadow-sm border border-gray-200">
    <div class="px-4 sm:px-6 py-4 border-b border-gray-200">
        <h3 class="text-lg font-semibold text-gray-900 flex items-center">
            <i class="fas fa-edit mr-2 text-ucs-red"></i>Actualizar Datos del Proyecto
        </h3>
    </div>

    <form method="POST" enctype="multipart/form-data" id="form" class="p-4 sm:p-6">
        {% csrf_token %}

        <!-- Basic Information -->
        <div class="mb-8">
            <h4 class="text-md font-medium text-gray-900 mb-4 flex items-center">
                <i class="fas fa-info-circle mr-2 text-blue-600"></i>Información Básica
            </h4>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        <i class="fas fa-heading mr-1 text-ucs-red"></i>Título del Proyecto
                    </label>
                    <input class="w-full border-2 border-gray-200 rounded-lg px-4 py-3 focus:border-ucs-red focus:ring-2 focus:ring-red-100 transition-all" 
                           type="text" name="titulo" value="{{ form.titulo.value|default:'' }}" 
                           placeholder="Ingresa el título del proyecto" />
                    {% if form.titulo.errors %}
                        <p class="text-sm text-red-600 mt-1 flex items-center">
                            <i class="fas fa-exclamation-circle mr-1"></i>{{ form.titulo.errors }}
                        </p>
                    {% endif %}
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        <i class="fas fa-users mr-1 text-ucs-red"></i>Autores
                    </label>
                    <input class="w-full border-2 border-gray-200 rounded-lg px-4 py-3 focus:border-ucs-red focus:ring-2 focus:ring-red-100 transition-all" 
                           type="text" name="autores" value="{{ form.autores.value|default:'' }}" 
                           placeholder="Nombres de los autores" />
                    {% if form.autores.errors %}
                        <p class="text-sm text-red-600 mt-1 flex items-center">
                            <i class="fas fa-exclamation-circle mr-1"></i>{{ form.autores.errors }}
                        </p>
                    {% endif %}
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        <i class="fas fa-id-card mr-1 text-ucs-red"></i>Cédula
                    </label>
                    <input class="w-full border-2 border-gray-200 rounded-lg px-4 py-3 focus:border-ucs-red focus:ring-2 focus:ring-red-100 transition-all" 
                           type="text" name="cedula" value="{{ form.cedula.value|default:'' }}" 
                           placeholder="Número de cédula" />
                    {% if form.cedula.errors %}
                        <p class="text-sm text-red-600 mt-1 flex items-center">
                            <i class="fas fa-exclamation-circle mr-1"></i>{{ form.cedula.errors }}
                        </p>
                    {% endif %}
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        <i class="fas fa-chalkboard-teacher mr-1 text-ucs-red"></i>Tutor
                    </label>
                    <input class="w-full border-2 border-gray-200 rounded-lg px-4 py-3 focus:border-ucs-red focus:ring-2 focus:ring-red-100 transition-all" 
                           type="text" name="tutor" value="{{ form.tutor.value|default:'' }}" 
                           placeholder="Nombre del tutor" />
                    {% if form.tutor.errors %}
                        <p class="text-sm text-red-600 mt-1 flex items-center">
                            <i class="fas fa-exclamation-circle mr-1"></i>{{ form.tutor.errors }}
                        </p>
                    {% endif %}
                </div>
                <div class="md:col-span-2">
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        <i class="fas fa-align-left mr-1 text-ucs-red"></i>Descripción
                    </label>
                    <textarea class="w-full border-2 border-gray-200 rounded-lg px-4 py-3 focus:border-ucs-red focus:ring-2 focus:ring-red-100 transition-all" 
                              name="descripcion" rows="3" placeholder="Describe brevemente el proyecto">{{ form.descripcion.value|default:'' }}</textarea>
                    {% if form.descripcion.errors %}
                        <p class="text-sm text-red-600 mt-1 flex items-center">
                            <i class="fas fa-exclamation-circle mr-1"></i>{{ form.descripcion.errors }}
                        </p>
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- Academic Information -->
        <div class="mb-8">
            <h4 class="text-md font-medium text-gray-900 mb-4 flex items-center">
                <i class="fas fa-graduation-cap mr-2 text-green-600"></i>Información Académica
            </h4>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        <i class="fas fa-layer-group mr-1 text-ucs-red"></i>Sección
                    </label>
                    <select class="w-full border-2 border-gray-200 rounded-lg px-4 py-3 focus:border-ucs-red focus:ring-2 focus:ring-red-100 transition-all" name="seccion">
                        <option value="">Seleccione una sección</option>
                        {% for seccion in secciones %}
                            {% if seccion.id == form.seccion.value %}
                                <option value="{{ seccion.id }}" selected>{{ seccion.seccion_estudiante }}</option>
                            {% else %}
                                <option value="{{ seccion.id }}">{{ seccion.seccion_estudiante }}</option>
                            {% endif %}
                        {% endfor %}
                    </select>
                    {% if form.seccion.errors %}
                        <p class="text-sm text-red-600 mt-1 flex items-center">
                            <i class="fas fa-exclamation-circle mr-1"></i>{{ form.seccion.errors }}
                        </p>
                    {% endif %}
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        <i class="fas fa-graduation-cap mr-1 text-ucs-red"></i>Carrera (PNF)
                    </label>
                    <select class="w-full border-2 border-gray-200 rounded-lg px-4 py-3 focus:border-ucs-red focus:ring-2 focus:ring-red-100 transition-all" name="pnf">
                        <option value="">Seleccione una carrera</option>
                        {% for pnf in pnfs %}
                            {% if pnf.id == form.pnf.value %}
                                <option value="{{ pnf.id }}" selected>{{ pnf.nombre_pnf }}</option>
                            {% else %}
                                <option value="{{ pnf.id }}">{{ pnf.nombre_pnf }}</option>
                            {% endif %}
                        {% endfor %}
                    </select>
                    {% if form.pnf.errors %}
                        <p class="text-sm text-red-600 mt-1 flex items-center">
                            <i class="fas fa-exclamation-circle mr-1"></i>{{ form.pnf.errors }}
                        </p>
                    {% endif %}
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        <i class="fas fa-route mr-1 text-ucs-red"></i>Trayecto
                    </label>
                    <select class="w-full border-2 border-gray-200 rounded-lg px-4 py-3 focus:border-ucs-red focus:ring-2 focus:ring-red-100 transition-all" name="trayecto">
                        <option value="">Seleccione un trayecto</option>
                        {% for trayecto in trayectos %}
                            {% if trayecto.id == form.trayecto.value %}
                                <option value="{{ trayecto.id }}" selected>{{ trayecto.nombre_trayecto }}</option>
                            {% else %}
                                <option value="{{ trayecto.id }}">{{ trayecto.nombre_trayecto }}</option>
                            {% endif %}
                        {% endfor %}
                    </select>
                    {% if form.trayecto.errors %}
                        <p class="text-sm text-red-600 mt-1 flex items-center">
                            <i class="fas fa-exclamation-circle mr-1"></i>{{ form.trayecto.errors }}
                        </p>
                    {% endif %}
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        <i class="fas fa-user-tie mr-1 text-ucs-red"></i>Tutor Metodológico
                    </label>
                    <input class="w-full border-2 border-gray-200 rounded-lg px-4 py-3 focus:border-ucs-red focus:ring-2 focus:ring-red-100 transition-all" 
                           type="text" name="tutor_metodologico" value="{{ form.tutor_metodologico.value|default:'' }}" 
                           placeholder="Nombre del tutor metodológico" />
                    {% if form.tutor_metodologico.errors %}
                        <p class="text-sm text-red-600 mt-1 flex items-center">
                            <i class="fas fa-exclamation-circle mr-1"></i>{{ form.tutor_metodologico.errors }}
                        </p>
                    {% endif %}
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        <i class="fas fa-calendar mr-1 text-ucs-red"></i>Fecha de Creación
                    </label>
                    <input class="w-full border-2 border-gray-200 rounded-lg px-4 py-3 focus:border-ucs-red focus:ring-2 focus:ring-red-100 transition-all" 
                           type="date" name="fecha_creacion" value="{{ form.fecha_creacion.value|date:'Y-m-d' }}" />
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        <i class="fas fa-map-marker-alt mr-1 text-ucs-red"></i>Estado
                    </label>
                    <input class="w-full border-2 border-gray-200 rounded-lg px-4 py-3 focus:border-ucs-red focus:ring-2 focus:ring-red-100 transition-all" 
                           type="text" name="estado" value="{{ form.estado.value|default:'' }}" 
                           placeholder="Estado donde se desarrolla" />
                    {% if form.estado.errors %}
                        <p class="text-sm text-red-600 mt-1 flex items-center">
                            <i class="fas fa-exclamation-circle mr-1"></i>{{ form.estado.errors }}
                        </p>
                    {% endif %}
                </div>
            </div>
        </div>

        <!-- Location Information -->
        <div class="mb-8">
            <h4 class="text-md font-medium text-gray-900 mb-4 flex items-center">
                <i class="fas fa-map-marked-alt mr-2 text-purple-600"></i>Información de Ubicación
            </h4>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        <i class="fas fa-church mr-1 text-ucs-red"></i>Parroquia
                    </label>
                    <input class="w-full border-2 border-gray-200 rounded-lg px-4 py-3 focus:border-ucs-red focus:ring-2 focus:ring-red-100 transition-all" 
                           type="text" name="parroquia" value="{{ form.parroquia.value|default:'' }}" 
                           placeholder="Parroquia del proyecto" />
                    {% if form.parroquia.errors %}
                        <p class="text-sm text-red-600 mt-1 flex items-center">
                            <i class="fas fa-exclamation-circle mr-1"></i>{{ form.parroquia.errors }}
                        </p>
                    {% endif %}
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        <i class="fas fa-city mr-1 text-ucs-red"></i>Municipio
                    </label>
                    <input class="w-full border-2 border-gray-200 rounded-lg px-4 py-3 focus:border-ucs-red focus:ring-2 focus:ring-red-100 transition-all" 
                           type="text" name="municipio" value="{{ form.municipio.value|default:'' }}" 
                           placeholder="Municipio del proyecto" />
                    {% if form.municipio.errors %}
                        <p class="text-sm text-red-600 mt-1 flex items-center">
                            <i class="fas fa-exclamation-circle mr-1"></i>{{ form.municipio.errors }}
                        </p>
                    {% endif %}
                </div>
                <div class="md:col-span-2">
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        <i class="fas fa-home mr-1 text-ucs-red"></i>Nombre de la Comunidad
                    </label>
                    <input class="w-full border-2 border-gray-200 rounded-lg px-4 py-3 focus:border-ucs-red focus:ring-2 focus:ring-red-100 transition-all" 
                           type="text" name="nombre_comunidad" value="{{ form.nombre_comunidad.value|default:'' }}" 
                           placeholder="Nombre de la comunidad beneficiada" />
                    {% if form.nombre_comunidad.errors %}
                        <p class="text-sm text-red-600 mt-1 flex items-center">
                            <i class="fas fa-exclamation-circle mr-1"></i>{{ form.nombre_comunidad.errors }}
                        </p>
                    {% endif %}
                </div>
                <div class="md:col-span-2">
                    <label class="block text-sm font-medium text-gray-700 mb-2">
                        <i class="fas fa-tags mr-1 text-ucs-red"></i>Palabras Clave
                    </label>
                    <input class="w-full border-2 border-gray-200 rounded-lg px-4 py-3 focus:border-ucs-red focus:ring-2 focus:ring-red-100 transition-all" 
                           type="text" name="palabras_clave" value="{{ form.palabras_clave.value|default:'' }}" 
                           placeholder="Palabras clave separadas por comas" />
                    {% if form.palabras_clave.errors %}
                        <p class="text-sm text-red-600 mt-1 flex items-center">
                            <i class="fas fa-exclamation-circle mr-1"></i>{{ form.palabras_clave.errors }}
                        </p>
                    {% endif %}
                </div>
            </div>
        </div>

        <input type="hidden" name="usuario" value="{{ user.id }}" />
        
        <!-- Submit Button -->
        <div class="pt-6 border-t border-gray-200">
            <div class="flex flex-col sm:flex-row gap-4 justify-end">
                <a href="{% url 'misproyectos' %}" class="inline-flex items-center justify-center px-6 py-3 border border-gray-300 rounded-lg text-gray-700 bg-white hover:bg-gray-50 transition-colors">
                    <i class="fas fa-times mr-2"></i>Cancelar
                </a>
                <button type="submit" class="inline-flex items-center justify-center px-6 py-3 bg-ucs-red text-white rounded-lg hover:bg-red-700 transition-colors font-medium">
                    <i class="fas fa-save mr-2"></i>Guardar Cambios
                </button>
            </div>
        </div>
    </form>
</div>
{% endblock %}
